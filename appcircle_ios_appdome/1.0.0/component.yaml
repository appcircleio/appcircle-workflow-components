platform: iOS
buildPlatform:
displayName: Appdome-Build-2Secure for iOS
description: "Integration that allows activating security and app protection features, building and signing mobile apps using Appdome's API."
webUrl: https://github.com/appcircleio/appcircle-ios-appdome-component
repoUrl: https://github.com/appcircleio/appcircle-ios-appdome-component.git
commit: ece5072
inputs:
- key: "AC_APPDOME_IPA_PATH"
  defaultValue: "$AC_APPDOME_IPA_PATH"
  isRequired: true
  title: App file URL or environment variable
  description: "URL to app file (ipa) or an environment variable representing its path (i.e. $AC_EXPORT_DIR/<myappname>.ipa)."
  helpText:
- key: "AC_APPDOME_API_KEY"
  defaultValue: "$AC_APPDOME_API_KEY"
  isRequired: true
  title: Appdome API Key
  description: "This API key must be taken from the Appdome."
  helpText:
- key: "AC_APPDOME_FUSION_SET_ID"
  defaultValue: "$AC_APPDOME_FUSION_SET_ID"
  isRequired: true
  title: Appdome Fusion Set ID
  description: "Fusion Set ID must be taken from the Appdome."
  helpText:
- key: "AC_APPDOME_TEAM_ID"
  defaultValue: "$AC_APPDOME_TEAM_ID"
  isRequired: false
  title: Appdome Team ID
  description: "Team ID must be taken from the Appdome."
  helpText:
- key: "AC_APPDOME_SIGN_METHOD"
  defaultValue: "On-Appdome"
  isRequired: true
  editorType: select
  title: Signing Method
  description: "App signing method."
  options: "On-Appdome,Private-Signing,Auto-Dev-Signing"
  helpText:
- key: "AC_IOS_ENTITLEMENTS"
  defaultValue: "$AC_IOS_ENTITLEMENTS"
  isRequired: true
  title: iOS Entitlement File Paths
  description: "Entitlements must be taken from the Xcode. You can separate entitlement files with commas."
  helpText:
- key: "AC_APPDOME_PROVISIONING_PROFILES"
  defaultValue: "$AC_PROVISIONING_PROFILES"
  isRequired: true
  title: Appdome Provisioning Profiles
  description: "Paths of the provisioning profiles. You can separate files with commas."
  helpText:
- key: "AC_APPDOME_CERTIFICATES"
  defaultValue: "$AC_CERTIFICATES"
  isRequired: true
  title: iOS Certificate File Path
  description: "Paths of the certificate file."
  helpText:
- key: "AC_APPDOME_CERTIFICATES_PASS"
  defaultValue: "$AC_APPDOME_CERTIFICATES_PASS"
  isRequired: false
  title: iOS Certificate Password
  description: "iOS Certificate Password."
  helpText:
- key: "AC_APPDOME_BUILD_LOGS"
  defaultValue: "false"
  isRequired: true
  editorType: select
  title: Build with Logs?
  description: "Build with diagnostic logs?"
  options: "true,false"
  helpText:
outputs:
- key: "AC_APPDOME_SECURED_IPA_PATH"
  title: "Secured .ipa File Path"
  description: Local path of the secured .ipa file. Available when 'Signing Method' set to 'On-Appdome' or 'Private-Signing'.
  helpText:
- key: "AC_APPDOME_PRIVATE_SIGN_SCRIPT_PATH"
  title: .sh Sign Script File Path
  description: "Local path of the .sh sign script file. Available when 'Signing Method' set to 'Auto-Dev-Signing"
  helpText:
- key: "AC_APPDOME_CERTIFICATE_PATH"
  title: Certified Secure Certificate .pdf file path
  description: "Local path of the Certified Secure Certificate .pdf file"
  helpText: 
processFilename: bash
processArguments: '%AC_STEP_TEMP%/main.sh'
files:
- "main.sh"