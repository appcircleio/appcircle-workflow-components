platform: Android
buildPlatform:
displayName: Android Re-Sign
description: "Re-sign the unsigned output file from the build step with the selected keystore to export a binary compatible with Android devices."
docsUrl: https://docs.appcircle.io/distribute/resign/#resigning-android-binaries
requiredComponents:
precedingComponents:
followingComponents:
webUrl: https://github.com/appcircleio/appcircle-android-resign-component
repoUrl: https://github.com/appcircleio/appcircle-android-resign-component.git
commit: bed52df
inputs:
- key: "AC_RESIGN_APK_URL"
  defaultValue: "$ResignFileUrl"
  isRequired: true
  title: Apk,AAB File Path
  description: Specify apk,aab file.
  helpText:
- key: "AC_RESIGN_FILENAME"
  defaultValue: "$ResignFileName"
  isRequired: true
  title: File Name
  description: Specify resigned file name.
  helpText:
- key: "AC_RESIGN_TARGETS"
  defaultValue: "$Targets"
  isRequired: true
  title: Targets
  description: "Android targets."
  helpText:  
- key: "AC_ANDROID_KEYSTORE_PATH"
  title: "Android Keystore Path"
  defaultValue: "$AC_ANDROID_KEYSTORE_PATH"
  isRequired: true
  description: (Autogenerated) Keystore file can be selected in the build settings.
  helpText: This value is autogenerated according to the build settings.
- key: "AC_ANDROID_KEYSTORE_PASSWORD"
  title: "Android Keystore Password"
  defaultValue: "$AC_ANDROID_KEYSTORE_PASSWORD"
  isRequired: true
  description: This value is autogenerated according to the build settings. 
  helpText: 
- key: "AC_ANDROID_ALIAS"
  title: "Android Alias"
  defaultValue: "$AC_ANDROID_ALIAS"
  isRequired: true
  description: This value is autogenerated according to the build settings. 
  helpText:
- key: "AC_ANDROID_ALIAS_PASSWORD"
  title: "Android Alias Password"
  defaultValue: "$AC_ANDROID_ALIAS_PASSWORD"
  isRequired: true
  description: This value is autogenerated according to the build settings. 
  helpText:
- key: "AC_CONVERT_AAB_TO_APK"
  title: "Convert AAB to APK"
  defaultValue: "false"
  isRequired: false
  options: "true,false"
  editorType: "select"
  description: Converts the uploaded AAB into a universal APK using [bundletool](https://developer.android.com/tools/bundletool). This option is only applicable if the uploaded file is an AAB.
  helpText:
- key: "AC_BUNDLETOOL_VERSION"
  title: "Bundletool Version"
  defaultValue: "latest"
  isRequired: false
  description: Bundletool version to install. The default value is latest. To install a different version, please refer to [this document](https://github.com/google/bundletool/releases). For example `1.18.1`.
  helpText: 
outputs:
- key: "AC_SIGNED_APK_PATH"
  title: "Signed APK Path"
  defaultValue: "AC_SIGNED_APK_PATH"
  description: Path of the signed apk file.
  helpText:
- key: "AC_SIGNED_AAB_PATH"
  title: "Signed AAB Path"
  defaultValue: "AC_SIGNED_AAB_PATH"
  description: Path of the signed aab file.
  helpText:
processFilename: ruby
processArguments: '%AC_STEP_TEMP%/main.rb'
files:
- "main.rb"
- "androidmanifest-changer-mac"
- "androidmanifest-changer-linux"